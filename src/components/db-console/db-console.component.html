<div class="bg-slate-900/70 backdrop-blur-lg border border-slate-700 rounded-lg shadow-2xl p-6 space-y-6 max-w-4xl mx-auto">
  <div>
      <h2 class="text-2xl font-semibold text-white">Database Command Console</h2>
      <p class="text-slate-400 mt-1">
        Execute simplified SQL commands to interact with the live customer database.
      </p>
  </div>
  
  <div class="space-y-2">
      <p class="text-sm font-medium text-slate-300">Example Commands:</p>
      <div class="flex flex-wrap gap-2">
        @for(ex of exampleQueries; track ex) {
            <button (click)="setQuery(ex)" class="text-xs font-fira bg-slate-700 hover:bg-slate-600 text-indigo-300 px-3 py-1 rounded-md transition-colors">
              {{ ex }}
            </button>
        }
      </div>
  </div>

  <div class="relative">
    <textarea #queryInput 
              (input)="query.set(queryInput.value)" 
              [value]="query()"
              placeholder="e.g., SELECT * FROM customers WHERE status = 'Paid'" 
              class="w-full h-24 p-4 font-fira text-base bg-slate-900/70 text-slate-100 border-2 border-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-300 resize-none placeholder-slate-600 caret-white focus:shadow-[0_0_15px_rgba(99,102,241,0.3)]"></textarea>
    <button (click)="runQuery()" [disabled]="isLoading()" class="absolute bottom-3 right-3 flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 disabled:bg-slate-600 disabled:cursor-not-allowed shadow-lg shadow-indigo-600/20">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
      </svg>
      <span>{{ isLoading() ? 'Running...' : 'Run Query' }}</span>
    </button>
  </div>

  @if (result(); as res) {
    <div class="bg-black/50 border border-slate-700 rounded-lg p-4 space-y-3 animate-fade-in">
      @if (res.message.startsWith('Error')) {
        <div class="flex items-start space-x-3 bg-red-900/30 border border-red-500/30 text-red-300 text-sm rounded-lg p-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
          <p class="font-fira">{{ res.message }}</p>
        </div>
      } @else {
        <p class="font-fira text-sm text-green-400">> {{ res.message }}</p>
      }
      
      @if (res.data) {
        <div class="bg-slate-950 rounded-md p-4 max-h-96 overflow-auto text-sm">
          <pre><code class="language-json font-fira" [innerHTML]="highlightedResult()"></code></pre>
        </div>
      }
    </div>
  }
</div>